/**
 * Lazy Forms
 *
 * Highly customizable HTML checkboxes, radios, dropdowns,
 * and buttons.
 *
 * https://github.com/marlorn/lazy-forms
 * 
 * Copyright 2012 John Goldsmith <http://github.com/marlorn>
 *
 */
(function(f,d,a){var g={checkbox:{spriteWidth:20,spriteHeight:20,spriteUnits:"px",spriteOrder:["uncheckedMouseLeave","uncheckedMouseEnter","uncheckedMouseDown","checkedMouseLeave","checkedMouseEnter","checkedMouseDown"],spriteDirection:"vertical",pathToSprite:"images/checkbox_vertical.png",labelToThe:"right",wrapperTag:"div",wrapperClass:"lazy-checkbox-wrapper",anchorClass:"lazy-checkbox-anchor",labelClass:"lazy-checkbox-label",onBeforeClick:false,onAfterClick:false,onBeforeMouseOver:false,onAfterMouseOver:false,onBeforeMouseOut:false,onAfterMouseOut:false},radio:{spriteWidth:20,spriteHeight:20,spriteUnits:"px",spriteOrder:["uncheckedMouseLeave","uncheckedMouseEnter","uncheckedMouseDown","checkedMouseLeave","checkedMouseEnter","checkedMouseDown"],spriteDirection:"vertical",pathToSprite:"images/radio_vertical.png",labelToThe:"right",wrapperTag:"div",wrapperClass:"lazy-radio-wrapper",anchorClass:"lazy-radio-anchor",labelClass:"lazy-radio-label",onBeforeClick:false,onAfterClick:false,onBeforeMouseOver:false,onAfterMouseOver:false,onBeforeMouseOut:false,onAfterMouseOut:false},button:{spriteWidth:{left:5,middle:1,right:5},spriteHeight:{left:30,middle:30,right:30},spriteUnits:"px",spriteDirection:"vertical",pathToSprite:{left:"images/button_left_vertical.png",middle:"images/button_mid_vertical.png",right:"images/button_right_vertical.png"},spriteOrder:{left:["mouseLeave","mouseEnter","mouseDown"],middle:["mouseLeave","mouseEnter","mouseDown"],right:["mouseLeave","mouseEnter","mouseDown"]},wrapperTag:"div",wrapperClass:"lazy-button-wrapper",anchorClass:"lazy-button-anchor",spanClass:"lazy-button-span",onBeforeClick:false,onAfterClick:false,onBeforeMouseOver:false,onAfterMouseOver:false,onBeforeMouseOut:false,onAfterMouseOut:false},select:{spriteWidth:{left:5,middle:1,right:29},spriteHeight:{left:30,middle:30,right:30},spriteUnits:"px",spriteDirection:"vertical",pathToSprite:{left:"images/select_left_vertical.png",middle:"images/select_mid_vertical.png",right:"images/select_right_vertical.png"},spriteOrder:{left:["mouseLeave","mouseEnter","mouseDown"],middle:["mouseLeave","mouseEnter","mouseDown"],right:["mouseLeave","mouseEnter","mouseDown"]},wrapperTag:"div",wrapperClass:"lazy-select-wrapper",anchorClass:"lazy-select-anchor",spanClass:"lazy-select-span",optionsWrapperClass:"lazy-select-options-wrapper",onBeforeClick:false,onAfterClick:false,onBeforeMouseOver:false,onAfterMouseOver:false,onBeforeMouseOut:false,onAfterMouseOut:false}},e="lazyForms",c={};function b(i,h){this.element=i;this.$element=f(i);this.tag=this.$element.prop("tagName").toLowerCase();this.options=f.extend({},g,h);this._defaults=g;this._name=e;if(this.tag=="input"){this.attrType=this.$element.attr("type");this.attrName=this.$element.attr("name")}if(this.tag=="input"){this.isInput=true;if(this.attrType=="checkbox"){this.isCheckbox=true;this.options=this.options.checkbox}else{if(this.attrType=="radio"){this.isRadio=true;this.options=this.options.radio}else{if(this.attrType=="button"){this.isInputButton=true;this.options=this.options.button}else{if(this.attrType=="submit"){this.isSubmit=true;this.options=this.options.button}}}}}else{if(this.tag=="select"){this.isSelect=true;this.options=this.options.select}else{if(this.tag=="button"){this.isButton=true;this.options=this.options.button}else{this.notSupported=true}}}this.init()}b.prototype.init=function(){this.buildWrapper=function(){this.injectWrapper();this.setWrapper();this.setWrapperClass();this.setWrapperStyle()};this.injectWrapper=function(){if(this.options.wrapperTag&&typeof(this.options.wrapperTag)=="string"){this.rawHtmlWrapperTag=this.options.wrapperTag.replace(/[^a-zA-Z]/g,"").toLowerCase();this.$element.wrap("<"+this.rawHtmlWrapperTag+"/>")}};this.setWrapper=function(){this.$wrapper=this.$element.parent(this.rawHtmlWrapperTag);this.wrapper=this.$wrapper.get()};this.setWrapperClass=function(){if(this.options.wrapperClass&&typeof(this.options.wrapperClass)=="string"){this.$wrapper.addClass(this.options.wrapperClass)}};this.setWrapperStyle=function(){this.$wrapper.css({})};this.buildLabel=function(){this.injectLabel();this.setLabel();this.injectLabelText();this.setLabelClass()};this.injectLabel=function(){if(this.isCheckbox||this.isRadio){if(this.$element.attr("data-label")){this.$wrapper.append("<label/>")}}else{if(this.isSubmit||this.isInputButton){this.setLabel()}else{if(this.isSelect||this.isButton){this.setLabel()}}}};this.setLabel=function(){if(this.isCheckbox||this.isRadio){this.$label=this.$element.siblings("label")}else{if(this.isSubmit||this.isInputButton){this.$label=this.$element.attr("value")}else{if(this.isSelect){this.$label=this.$element.children("option").first().html()}else{if(this.isButton){this.$label=this.$element.html()}}}}};this.injectLabelText=function(){if(this.isCheckbox||this.isRadio){if(this.$element.attr("data-label")){this.$label.html(this.$element.attr("data-label"))}}else{if(this.isSubmit||this.isInputButton||this.isSelect||this.isButton){this.$midSpan.html(this.$label)}}};this.setLabelClass=function(){if(this.isCheckbox||this.isRadio){if(this.options.labelClass&&typeof(this.options.labelClass)=="string"){this.$label.addClass(this.options.labelClass)}}};this.buildAnchor=function(){this.injectAnchor();this.setAnchor();this.setAnchorClass();this.setAnchorStyle()};this.injectAnchor=function(){this.$wrapper.append('<a href="#"/>')};this.setAnchor=function(){this.$anchor=this.$element.siblings("a")};this.setAnchorClass=function(){if(this.options.anchorClass&&typeof(this.options.anchorClass)=="string"){this.$anchor.addClass(this.options.anchorClass)}};this.setAnchorStyle=function(){if(this.isCheckbox||this.isRadio){if(this.options.pathToSprite&&typeof(this.options.pathToSprite)=="string"){this.$anchor.css({"background-image":"url("+this.options.pathToSprite+")","background-repeat":"no-repeat no-repeat",height:this.rawSpriteHeight+this.options.spriteUnits,width:this.rawSpriteWidth+this.options.spriteUnits,display:"block"})}}else{if(this.isSubmit||this.isInputButton||this.isSelect||this.isButton){this.$anchor.css({display:"block",})}}if(this.options.labelToThe&&typeof(this.options.labelToThe)=="string"){if(this.options.labelToThe=="right"){this.$anchor.css({"float":"left"})}else{if(this.options.labelToThe=="left"){this.$anchor.css({"float":"right"})}}}};this.buildSpans=function(){this.injectSpans();this.setSpans();this.setSpanClass();this.setSpanStyle()};this.injectSpans=function(){if(this.isSubmit||this.isInputButton){this.$anchor.append("<span/><span/><span/>")}else{if(this.isSelect||this.isButton){this.$anchor.append("<span/><span/><span/>")}}};this.setSpans=function(){this.$spans=this.$anchor.children("span");this.$leftSpan=this.$anchor.children("span").first();this.$midSpan=this.$anchor.children("span:not(:first, :last)");this.$rightSpan=this.$anchor.children("span").last()};this.setSpanClass=function(){if(this.options.spanClass&&typeof(this.options.spanClass)=="string"){this.$spans.addClass(this.options.spanClass);this.$leftSpan.addClass(this.options.spanClass+"-left");this.$midSpan.addClass(this.options.spanClass+"-mid");this.$rightSpan.addClass(this.options.spanClass+"-right")}};this.setSpanStyle=function(){if(this.isSubmit||this.isInputButton||this.isSelect||this.isButton){this.$leftSpan.css({"background-image":"url("+this.options.pathToSprite.left+")","background-repeat":"no-repeat",width:this.rawSpriteWidth.left,height:this.rawSpriteHeight.left,display:"block","float":"left"});this.$midSpan.css({"background-image":"url("+this.options.pathToSprite.middle+")","background-repeat":"repeat-x",height:this.rawSpriteHeight.middle,display:"block","float":"left","vertical-align":"middle","line-height":this.rawSpriteHeight.middle+this.options.spriteUnits});this.$rightSpan.css({"background-image":"url("+this.options.pathToSprite.right+")","background-repeat":"no-repeat",width:this.rawSpriteWidth.right,height:this.rawSpriteHeight.right,display:"block","float":"left"})}};this.buildOptions=function(){this.injectOptionsWrapper();this.setOptionsWrapper();this.setOptionsWrapperClass();this.toggleOptions();this.injectOptionsList();this.setOptionsList();this.injectOptions();this.setOptions();this.positionOptions()};foobar=function(){console.log("foobar")};this.injectOptionsWrapper=function(){if(this.isSelect){this.$wrapper.append("<div/>")}};this.setOptionsWrapper=function(){this.$optionsWrapper=this.$wrapper.children("div")};this.setOptionsWrapperClass=function(){if(this.options.optionsWrapperClass&&typeof(this.options.optionsWrapperClass)=="string"){this.$optionsWrapper.addClass(this.options.optionsWrapperClass)}};this.injectOptionsList=function(){this.$optionsWrapper.append("<ul/>")};this.setOptionsList=function(){this.$optionsList=this.$optionsWrapper.children("ul")};this.injectOptions=function(){this.$realOptions=this.$wrapper.children("select").children("option");var h=this;this.$realOptions.each(function(){h.$optionsList.append("<li>"+f(this).html()+"</li>")})};this.setOptions=function(){this.$options=this.$optionsList.children("li")};this.positionOptions=function(){this.$optionsWrapper.css({position:"absolute",left:this.$wrapper.position().left,top:this.$wrapper.position().top+this.$wrapper.get(0).offsetHeight})};this.toggleOptions=function(){this.$optionsWrapper.toggle()};this.hideElement=function(){this.$element.hide()};this.rebind=function(){this.unbind();this.bind()};this.unbind=function(){};this.bind=function(){};this.resetGroup=function(){f(this.tag+'[type="'+this.attrType+'"][name="'+this.attrName+'"]').attr("checked",false);f(this.tag+'[type="'+this.attrType+'"][name="'+this.attrName+'"]').siblings(this.$label).css({"background-position":this.spriteStates.uncheckedMouseLeave})};this.computeSprite=function(){this.spriteStates={};if(this.options.spriteOrder&&typeof(this.options.spriteOrder)=="object"){this.spriteOrderLength=_.size(this.options.spriteOrder)}this.spriteStates={};if(this.isCheckbox||this.isRadio){if(this.options.spriteWidth){this.rawSpriteWidth=(typeof(this.options.spriteWidth)=="number")?this.options.spriteWidth:parseInt(this.options.spriteWidth)}if(this.options.spriteHeight){this.rawSpriteHeight=(typeof(this.options.spriteHeight)=="number")?this.options.spriteHeight:parseInt(this.options.spriteHeight)}for(var l=0;l<this.spriteOrderLength;l++){if(this.options.spriteDirection=="vertical"){this.spriteStates[this.options.spriteOrder[l]]="0"+this.options.spriteUnits+" "+((this.rawSpriteHeight*l)*-1).toString()+this.options.spriteUnits}else{if(this.options.spriteDirection=="horizontal"){this.spriteStates[this.options.spriteOrder[l]]=((this.rawSpriteWidth*l)*-1).toString()+this.options.spriteUnits+" 0"+this.options.spriteUnits}}}}else{if(this.isSubmit||this.isInputButton||this.isSelect||this.isButton){this.spriteStates={left:{},middle:{},right:{}};this.rawSpriteHeight={left:null,middle:null,right:null};this.rawSpriteWidth={left:null,middle:null,right:null};this.spriteOrderKeys=_.keys(this.options.spriteOrder);this.spriteWidthKeys=_.keys(this.options.spriteWidth);this.spriteHeightKeys=_.keys(this.options.spriteHeight);this.spriteOrderKeysLength=this.spriteOrderKeys.length;this.spriteWidthKeysLength=this.spriteWidthKeys.length;this.spriteHeightKeysLength=this.spriteHeightKeys.length;if(this.options.spriteWidth.left){this.rawSpriteWidth.left=(typeof(this.options.spriteWidth.left)=="number")?this.options.spriteWidth.left:parseInt(this.options.spriteWidth.left)}if(this.options.spriteHeight.left){this.rawSpriteHeight.left=(typeof(this.options.spriteHeight.left)=="number")?this.options.spriteHeight.left:parseInt(this.options.spriteHeight.left)}if(this.options.spriteWidth.middle){this.rawSpriteWidth.middle=(typeof(this.options.spriteWidth.middle)=="number")?this.options.spriteWidth.middle:parseInt(this.options.spriteWidth.middle)}if(this.options.spriteHeight.middle){this.rawSpriteHeight.middle=(typeof(this.options.spriteHeight.middle)=="number")?this.options.spriteHeight.middle:parseInt(this.options.spriteHeight.middle)}if(this.options.spriteWidth.right){this.rawSpriteWidth.right=(typeof(this.options.spriteWidth.right)=="number")?this.options.spriteWidth.right:parseInt(this.options.spriteWidth.right)}if(this.options.spriteHeight.right){this.rawSpriteHeight.right=(typeof(this.options.spriteHeight.right)=="number")?this.options.spriteHeight.right:parseInt(this.options.spriteHeight.right)}for(var l=0;l<this.spriteOrderLength;l++){var m=this.spriteOrderKeys[l];var k=this.options.spriteOrder[this.spriteOrderKeys[l]];for(var h=0;h<k.length;h++){if(this.options.spriteDirection=="vertical"){this.spriteStates[m][k[h]]="0"+this.options.spriteUnits+" "+((this.rawSpriteHeight[m]*h)*-1).toString()+this.options.spriteUnits}else{if(this.options.spriteDirection=="horizontal"){this.spriteStates[m][k[h]]=((this.rawSpriteWidth[m]*h)*-1).toString()+this.options.spriteUnits+" 0"+this.options.spriteUnits}}}}}}};this.customBeforeMouseDown=function(h){if(this.options.onBeforeMouseDown){this.options.onBeforeMouseDown(this,h)}};this.customAfterMouseDown=function(h){if(this.options.onAfterMouseDown){this.options.onAfterMouseDown(this,h)}};this.customBeforeMouseUp=function(h){if(this.options.onBeforeMouseUp){this.options.onBeforeMouseUp(this,h)}};this.customAfterMouseUp=function(h){if(this.options.onAfterMouseUp){this.options.onAfterMouseUp(this,h)}};this.customBeforeMouseEnter=function(h){if(this.options.onBeforeMouseOver){this.options.onBeforeMouseOver(this,h)}};this.customAfterMouseEnter=function(h){if(this.options.onAfterMouseOver){this.options.onAfterMouseOver(this,h)}};this.customBeforeMouseLeave=function(h){if(this.options.onBeforeMouseOut){this.options.onBeforeMouseOut(this,h)}};this.customAfterMouseLeave=function(h){if(this.options.onAfterMouseOut){this.options.onAfterMouseOut(this,h)}};this.mouseLeave=function(h){this.customBeforeMouseLeave(h);if(this.isCheckbox||this.isRadio){if(this.$element.attr("checked")=="checked"||this.$element.attr("checked")==true){this.$anchor.css({"background-position":this.spriteStates.checkedMouseLeave})}else{this.$anchor.css({"background-position":this.spriteStates.uncheckedMouseLeave})}}else{if(this.isSelect||this.isButton||this.isInputButton||this.isSubmit){this.$leftSpan.css({"background-position":this.spriteStates.left.mouseLeave});this.$midSpan.css({"background-position":this.spriteStates.middle.mouseLeave});this.$rightSpan.css({"background-position":this.spriteStates.right.mouseLeave})}}this.customAfterMouseLeave(h)};this.mouseEnter=function(h){this.customBeforeMouseEnter(h);if(this.isCheckbox||this.isRadio){if(this.$element.attr("checked")=="checked"||this.$element.attr("checked")==true){this.$anchor.css({"background-position":this.spriteStates.checkedMouseEnter})}else{this.$anchor.css({"background-position":this.spriteStates.uncheckedMouseEnter})}}else{if(this.isSelect||this.isButton||this.isInputButton||this.isSubmit){this.$leftSpan.css({"background-position":this.spriteStates.left.mouseEnter});this.$midSpan.css({"background-position":this.spriteStates.middle.mouseEnter});this.$rightSpan.css({"background-position":this.spriteStates.right.mouseEnter})}}this.customAfterMouseEnter(h)};this.mouseDown=function(h){h.preventDefault();this.customBeforeMouseDown(h);if(this.isCheckbox||this.isRadio){if(this.$element.attr("checked")=="checked"||this.$element.attr("checked")==true){this.$anchor.css({"background-position":this.spriteStates.checkedMouseDown})}else{this.$anchor.css({"background-position":this.spriteStates.uncheckedMouseDown})}}else{if(this.isSelect||this.isButton||this.isInputButton||this.isSubmit){this.$leftSpan.css({"background-position":this.spriteStates.left.mouseDown});this.$midSpan.css({"background-position":this.spriteStates.middle.mouseDown});this.$rightSpan.css({"background-position":this.spriteStates.right.mouseDown})}}this.customAfterMouseDown(h)};this.mouseUp=function(h){h.preventDefault();this.customBeforeMouseUp(h);if(this.isCheckbox){this.$element.attr("checked",!this.$element.attr("checked"));if(this.$element.attr("checked")=="checked"){this.$anchor.css({"background-position":this.spriteStates.checkedMouseEnter})}else{this.$anchor.css({"background-position":this.spriteStates.uncheckedMouseEnter})}}else{if(this.isRadio){this.resetGroup();this.$element.attr("checked",true);if(this.$element.attr("checked")=="checked"||this.$element.attr("checked")==true){this.$anchor.css({"background-position":this.spriteStates.checkedMouseEnter})}else{this.$anchor.css({"background-position":this.spriteStates.uncheckedMouseEnter})}}else{if(this.isSelect){this.toggleOptions();this.$leftSpan.css({"background-position":this.spriteStates.left.mouseEnter});this.$midSpan.css({"background-position":this.spriteStates.middle.mouseEnter});this.$rightSpan.css({"background-position":this.spriteStates.right.mouseEnter})}else{if(this.isButton||this.isInputButton||this.isSubmit){this.$leftSpan.css({"background-position":this.spriteStates.left.mouseEnter});this.$midSpan.css({"background-position":this.spriteStates.middle.mouseEnter});this.$rightSpan.css({"background-position":this.spriteStates.right.mouseEnter})}}}}this.customAfterMouseUp(h)};this.bindEvents=function(){var h=this;this.$wrapper.bind("mousedown",function(i){h.mouseDown(i)});this.$wrapper.bind("mouseup",function(i){h.mouseUp(i)});this.$wrapper.bind("mouseenter",function(i){h.mouseEnter(i)});this.$wrapper.bind("mouseleave",function(i){h.mouseLeave(i)})};this.build=function(){this.hideElement();this.computeSprite();this.buildWrapper();this.buildAnchor();this.buildSpans();this.buildOptions();this.buildLabel();this.bindEvents()};this.build()};f.fn[e]=function(h){return this.each(function(){if(!f.data(this,"plugin_"+e)){f.data(this,"plugin_"+e,new b(this,h))}})}})($,window,document);